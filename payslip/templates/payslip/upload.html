<!DOCTYPE html>
<html lang="en">
  <head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Payslip Generator - Aveon HR Suite</title>
    <link rel="stylesheet" href="{% static 'payslip/styles.css' %}" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        background: #f8fafc;
        color: #1e293b;
        line-height: 1.6;
      }

      /* Header Navigation */
      .top-nav {
        background: white;
        border-bottom: 1px solid #e2e8f0;
        padding: 16px 0;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .top-nav-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 24px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .logo-section {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .logo-icon {
        width: 40px;
        height: 40px;
        background: linear-gradient(135deg, #5b5fff 0%, #7c7fff 100%);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 20px;
        box-shadow: 0 2px 8px rgba(91, 95, 255, 0.25);
      }

      .logo-text {
        font-size: 22px;
        font-weight: 700;
        color: #0f172a;
        letter-spacing: -0.5px;
      }

      .nav-actions {
        display: flex;
        align-items: center;
        gap: 16px;
      }

      .btn-secondary {
        padding: 8px 16px;
        background: transparent;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        color: #64748b;
        cursor: pointer;
        transition: all 0.2s;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .btn-secondary:hover {
        background: #f8fafc;
        border-color: #cbd5e1;
        color: #475569;
      }

      /* Hero Section */
      .hero-section {
        background: linear-gradient(135deg, #f0f4ff 0%, #faf5ff 50%, #f0f9ff 100%);
        padding: 80px 24px;
        position: relative;
        overflow: hidden;
      }

      .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 50%;
        height: 100%;
        background: radial-gradient(ellipse at top right, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
      }

      .hero-container {
        max-width: 1400px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 60px;
        align-items: center;
        position: relative;
        z-index: 1;
      }

      .hero-text {
        max-width: 600px;
      }

      .hero-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 8px 16px;
        background: rgba(91, 95, 255, 0.1);
        border: 1px solid rgba(91, 95, 255, 0.2);
        border-radius: 50px;
        font-size: 13px;
        font-weight: 500;
        color: #5b5fff;
        margin-bottom: 24px;
      }

      .hero-badge svg {
        width: 14px;
        height: 14px;
      }

      .hero-title {
        font-size: 56px;
        font-weight: 800;
        line-height: 1.1;
        margin-bottom: 20px;
        color: #0f172a;
      }

      .hero-title-gradient {
        background: linear-gradient(135deg, #5b5fff 0%, #8b5cf6 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .hero-description {
        font-size: 18px;
        line-height: 1.6;
        color: #64748b;
      }

      .hero-mockup {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .mockup-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        max-width: 400px;
      }

      .mockup-avatar {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, #ddd6fe 0%, #bfdbfe 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        color: #5b5fff;
        margin-bottom: 20px;
      }

      .mockup-line {
        height: 12px;
        background: #f1f5f9;
        border-radius: 4px;
        margin-bottom: 8px;
      }

      .mockup-line.short {
        width: 40%;
      }

      .mockup-line.medium {
        width: 60%;
      }

      .mockup-box {
        background: #f8fafc;
        border-radius: 8px;
        padding: 16px;
        margin-top: 20px;
      }

      .mockup-download {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, #5b5fff 0%, #8b5cf6 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        margin-left: auto;
        margin-top: -24px;
        box-shadow: 0 4px 12px rgba(91, 95, 255, 0.4);
      }

      /* Main Container */
      .main-wrapper {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 24px;
      }

      /* Breadcrumb */
      .breadcrumb {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: #64748b;
        margin-bottom: 24px;
      }

      .breadcrumb a {
        color: #64748b;
        text-decoration: none;
        transition: color 0.2s;
      }

      .breadcrumb a:hover {
        color: #5b5fff;
      }

      .breadcrumb-separator {
        color: #cbd5e1;
      }

      /* Page Header */
      .page-header {
        margin-bottom: 32px;
      }

      .page-title {
        font-size: 32px;
        font-weight: 700;
        color: #0f172a;
        margin-bottom: 8px;
      }

      .page-description {
        font-size: 16px;
        color: #64748b;
        max-width: 600px;
      }

      /* Form Layout */
      .form-layout {
        display: grid;
        grid-template-columns: 1fr 360px;
        gap: 24px;
        align-items: start;
        max-width: 1300px;
      }

      /* Form Card */
      .form-card {
        background: white;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        padding: 0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        max-width: 900px;
      }

      .form-card-header {
        padding: 20px 24px;
        border-bottom: 1px solid #f1f5f9;
      }

      .form-card-title {
        font-size: 18px;
        font-weight: 600;
        color: #0f172a;
        margin-bottom: 4px;
      }

      .form-card-subtitle {
        font-size: 14px;
        color: #64748b;
      }

      .form-card-body {
        padding: 24px;
      }

      /* Form Sections */
      .form-section {
        margin-bottom: 28px;
      }

      .form-section:last-child {
        margin-bottom: 0;
      }

      .section-label {
        font-size: 11px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.8px;
        color: #94a3b8;
        margin-bottom: 16px;
        display: block;
      }

      .section-icon {
        width: 16px;
        height: 16px;
        color: #5b5fff;
      }

      /* Form Groups */
      .form-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }

      .form-grid-three {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 14px;
      }

      .form-group {
        margin-bottom: 14px;
      }

      .form-group.full-width {
        grid-column: 1 / -1;
      }

      .form-label {
        display: block;
        font-size: 13px;
        font-weight: 500;
        color: #334155;
        margin-bottom: 6px;
      }

      .form-input {
        width: 100%;
        padding: 9px 12px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
        color: #1e293b;
        background: white;
        transition: all 0.2s;
      }

      .form-input:hover {
        border-color: #cbd5e1;
      }

      .form-input:focus {
        outline: none;
        border-color: #5b5fff;
        box-shadow: 0 0 0 3px rgba(91, 95, 255, 0.1);
      }

      .form-input::placeholder {
        color: #94a3b8;
      }

      textarea.form-input {
        resize: vertical;
        min-height: 80px;
        font-family: inherit;
      }

      /* Upload Box */
      .upload-box {
        border: 2px dashed #e2e8f0;
        border-radius: 10px;
        padding: 16px;
        text-align: center;
        background: #f8fafc;
        transition: all 0.2s;
        cursor: pointer !important;
        position: relative;
        min-height: 126px;
        user-select: none;
        display: block;
        pointer-events: auto !important;
      }

      .upload-box:hover {
        border-color: #5b5fff;
        background: #f5f6ff;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(91, 95, 255, 0.15);
      }
      
      .upload-box:active {
        transform: translateY(0);
      }

      .upload-box.has-file {
        border-color: #10b981;
        background: #f0fdf4;
        border-style: solid;
      }

      .upload-icon {
        width: 28px;
        height: 28px;
        margin: 0 auto 8px;
        color: #5b5fff;
        pointer-events: none !important;
      }

      .upload-box.has-file .upload-icon {
        color: #10b981;
      }

      .upload-title {
        font-size: 12px;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 3px;
        pointer-events: none !important;
      }

      .upload-subtitle {
        font-size: 11px;
        color: #64748b;
        margin-bottom: 6px;
        pointer-events: none !important;
      }

      .upload-link {
        color: #5b5fff;
        font-weight: 500;
        text-decoration: none;
        pointer-events: none !important;
      }

      .upload-hint {
        font-size: 9px;
        color: #94a3b8;
        margin-top: 4px;
        pointer-events: none !important;
      }
      
      /* SVG elements inside upload box */
      .upload-box svg,
      .upload-box svg * {
        pointer-events: none !important;
      }
      
      /* All text elements inside upload box */
      .upload-box div,
      .upload-box span {
        pointer-events: none !important;
      }

      .file-input-hidden {
        display: none;
      }

      /* Submit Button */
      .form-footer {
        padding: 18px 24px;
        border-top: 1px solid #f1f5f9;
        background: #f8fafc;
        border-radius: 0 0 12px 12px;
      }

      .btn-primary {
        width: 100%;
        padding: 12px 24px;
        background: #5b5fff;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
      }

      .btn-primary:hover {
        background: #4a4de6;
        transform: translateY(-1px);
        box-shadow: 0 10px 20px rgba(91, 95, 255, 0.3);
      }

      .btn-primary:active {
        transform: translateY(0);
      }

      /* Generate Button as Card */
      .btn-generate-card {
        width: 100%;
        height: 100%;
        min-height: 126px;
        padding: 16px;
        background: linear-gradient(135deg, #5b5fff 0%, #8b5cf6 100%);
        color: white;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 12px rgba(91, 95, 255, 0.25);
      }

      .btn-generate-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(91, 95, 255, 0.35);
      }

      .btn-generate-card:active {
        transform: translateY(0);
      }

      .btn-generate-card svg {
        color: white;
      }

      /* Sidebar */
      .sidebar {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      .info-card {
        background: white;
        border-radius: 12px;
        border: 1px solid #e2e8f0;
        padding: 18px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      .info-card.highlight {
        background: linear-gradient(135deg, #5b5fff 0%, #8b5cf6 100%);
        color: white;
        border: none;
        box-shadow: 0 4px 12px rgba(91, 95, 255, 0.25);
      }

      .info-card-title {
        font-size: 15px;
        font-weight: 600;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .info-card-title svg {
        width: 18px;
        height: 18px;
      }

      .info-list {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .info-list li {
        padding: 9px 0;
        font-size: 13px;
        display: flex;
        align-items: flex-start;
        gap: 10px;
        line-height: 1.5;
      }

      .info-list li::before {
        content: '‚úì';
        color: #10b981;
        font-weight: 700;
        flex-shrink: 0;
      }

      .info-card.highlight .info-list li::before {
        color: #c4b5fd;
      }

      .info-list.numbered li {
        counter-increment: item;
        padding-left: 0;
      }

      .info-list.numbered li::before {
        content: counter(item);
        background: rgba(255, 255, 255, 0.25);
        color: white;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 13px;
        font-weight: 700;
        flex-shrink: 0;
      }

      .info-card:not(.highlight) .info-list.numbered li::before {
        background: rgba(91, 95, 255, 0.1);
        color: #5b5fff;
      }

      .info-list.numbered {
        counter-reset: item;
      }

      .column-badge {
        display: inline-block;
        background: #fef3c7;
        color: #92400e;
        padding: 3px 8px;
        border-radius: 4px;
        font-size: 10px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.3px;
      }

      /* Error Message */
      .error-message {
        background: #fef2f2;
        border: 1px solid #fecaca;
        color: #991b1b;
        padding: 14px 16px;
        border-radius: 8px;
        font-size: 14px;
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .error-message svg {
        width: 20px;
        height: 20px;
        flex-shrink: 0;
      }

      /* Responsive */
      @media (max-width: 1024px) {
        .hero-container {
          grid-template-columns: 1fr;
          text-align: center;
        }

        .hero-mockup {
          display: none;
        }

        .hero-text {
          max-width: 100%;
        }

        .form-layout {
          grid-template-columns: 1fr;
        }

        .form-grid,
        .form-grid-three {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 640px) {
        .hero-section {
          padding: 60px 16px;
        }

        .hero-title {
          font-size: 36px;
        }

        .main-wrapper {
          padding: 24px 16px;
        }

        .form-card-body {
          padding: 20px;
        }

        .form-footer {
          padding: 16px 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Top Navigation -->
    <nav class="top-nav">
      <div class="top-nav-container">
        <div class="logo-section">
          <div class="logo-icon">
            <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
              <path d="M9 2a2 2 0 00-2 2v16a2 2 0 002 2h6a2 2 0 002-2V4a2 2 0 00-2-2H9zm0 2h6v16H9V4zm2 2v2h2V6h-2zm0 4v2h2v-2h-2zm0 4v2h2v-2h-2z"/>
            </svg>
          </div>
          <span class="logo-text">Aveon PayslipPro</span>
        </div>
        <div class="nav-actions">
          <a href="/" class="btn-secondary">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
              <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
            </svg>
            Home
          </a>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
      <div class="hero-container">
        <div class="hero-text">
          <div class="hero-badge">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <circle cx="12" cy="12" r="3"/>
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
            </svg>
            Professional PDF Generation
          </div>
          <h1 class="hero-title">
            Generate Employee<br>
            <span class="hero-title-gradient">Payslips Instantly</span>
          </h1>
          <p class="hero-description">
            Upload your monthly salary statement, add your company branding, and export professional PDF payslips for your entire team in seconds.
          </p>
        </div>

        <div class="hero-mockup">
          <div class="mockup-card">
            <div class="mockup-avatar">A</div>
            <div class="mockup-line"></div>
            <div class="mockup-line short"></div>
            <div class="mockup-box">
              <div class="mockup-line medium" style="margin-bottom: 12px;"></div>
              <div class="mockup-line" style="height: 8px;"></div>
              <div class="mockup-line" style="height: 8px;"></div>
            </div>
            <div class="mockup-download">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="24" height="24">
                <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content -->
    <div class="main-wrapper">

      <!-- Form Layout -->
      <div class="form-layout">
        <!-- Main Form -->
        <div class="form-card">
          <div class="form-card-header">
            <h2 class="form-card-title">Company & Upload Details</h2>
            <p class="form-card-subtitle">Fill in your company information and upload the salary data</p>
          </div>

          <form method="post" enctype="multipart/form-data" id="payslip-form">
            {% csrf_token %}

            <div class="form-card-body">
              {% if error %}
              <div class="error-message">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                </svg>
                <span>{{ error }}</span>
              </div>
              {% endif %}

              <!-- Company Information -->
              <div class="form-section">
                <h3 class="section-label">Company Information</h3>

                <div class="form-grid-three">
                  <div class="form-group">
                    <label for="{{ form.company_name.id_for_label }}" class="form-label">Company Name</label>
                    {{ form.company_name }}
                  </div>

                  <div class="form-group">
                    <label for="{{ form.company_email.id_for_label }}" class="form-label">Email Address</label>
                    {{ form.company_email }}
                  </div>

                  <div class="form-group">
                    <label for="{{ form.company_phone.id_for_label }}" class="form-label">Phone Number</label>
                    {{ form.company_phone }}
                  </div>
                </div>

                <div class="form-group">
                  <label for="{{ form.company_address.id_for_label }}" class="form-label">Company Address</label>
                  {{ form.company_address }}
                </div>
              </div>
              
              <style>
                /* Style Django form fields */
                #id_company_name,
                #id_company_email,
                #id_company_phone,
                #id_company_address,
                #id_company_logo,
                #id_salary_file {
                  width: 100%;
                  padding: 9px 12px;
                  border: 1px solid #e2e8f0;
                  border-radius: 8px;
                  font-size: 14px;
                  color: #1e293b;
                  background: white;
                  transition: all 0.2s;
                  font-family: inherit;
                }
                
                #id_company_address {
                  resize: vertical;
                  min-height: 80px;
                }
                
                #id_company_name:hover,
                #id_company_email:hover,
                #id_company_phone:hover,
                #id_company_address:hover {
                  border-color: #cbd5e1;
                }
                
                #id_company_name:focus,
                #id_company_email:focus,
                #id_company_phone:focus,
                #id_company_address:focus {
                  outline: none;
                  border-color: #5b5fff;
                  box-shadow: 0 0 0 3px rgba(91, 95, 255, 0.1);
                }
                
                #id_company_name::placeholder,
                #id_company_email::placeholder,
                #id_company_phone::placeholder,
                #id_company_address::placeholder {
                  color: #94a3b8;
                }
              </style>

              <!-- Documents & Files -->
              <div class="form-section">
                <h3 class="section-label">Documents & Branding</h3>

                <div class="form-grid-three">
                  <!-- Logo Upload -->
                  <div class="form-group">
                    <label class="form-label">Company Logo (Optional)</label>
                    <div class="upload-box" id="logo-upload-box">
                      <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                      </svg>
                      <div class="upload-title">Upload Logo</div>
                      <div class="upload-subtitle">
                        <span class="upload-link">Click to browse</span> or drag and drop
                      </div>
                      <div class="upload-hint">PNG, JPG (max. 2MB)</div>
                    </div>
                    <input type="file" id="id_company_logo" name="company_logo" class="file-input-hidden" accept="image/*">
                  </div>

                  <!-- Excel Upload -->
                  <div class="form-group">
                    <label class="form-label">Salary Statement (Excel)</label>
                    <div class="upload-box" id="excel-upload-box">
                      <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                      </svg>
                      <div class="upload-title">Upload Excel File</div>
                      <div class="upload-subtitle">
                        <span class="upload-link">Click to browse</span> or drag and drop
                      </div>
                      <div class="upload-hint">XLSX, XLS</div>
                    </div>
                    <input type="file" id="id_salary_file" name="salary_file" class="file-input-hidden" accept=".xlsx,.xls" required>
                  </div>

                  <!-- Generate Button -->
                  <div class="form-group">
                    <label class="form-label" style="opacity: 0;">Action</label>
                    <button type="submit" class="btn-generate-card">
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="28" height="28" style="margin: 0 auto 8px;">
                        <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
                      </svg>
                      <div style="font-size: 13px; font-weight: 600; margin-bottom: 3px;">Generate Payslips</div>
                      <div style="font-size: 10px; opacity: 0.85;">Click to create PDFs</div>
                    </button>
                  </div>
                </div>
              </div>
            </div>

          </form>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
          <!-- Quick Tips -->
          <div class="info-card highlight">
            <div class="info-card-title">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
              Quick Tips
            </div>
            <ul class="info-list numbered">
              <li>Ensure Excel file has headers in the first row</li>
              <li>Format numeric columns as numbers, not text</li>
              <li>Use transparent PNG for logo for best results</li>
            </ul>
          </div>

          <!-- Required Columns -->
          <div class="info-card">
            <div class="info-card-title">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
              </svg>
              Required Columns
            </div>
            <ul class="info-list">
              <li><strong>Employee ID</strong> <span class="column-badge">Required</span></li>
              <li><strong>Employee Name</strong> <span class="column-badge">Required</span></li>
              <li><strong>Department</strong> <span class="column-badge">Required</span></li>
              <li><strong>Designation</strong> <span class="column-badge">Required</span></li>
              <li><strong>Basic Salary</strong> <span class="column-badge">Required</span></li>
              <li><strong>HRA</strong> <span class="column-badge">Required</span></li>
              <li><strong>Net Salary</strong> <span class="column-badge">Required</span></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script>
      // ========================================
      // SELF-TEST: Upload & Generate Functionality
      // ========================================
      
      document.addEventListener('DOMContentLoaded', function() {
        console.log('üü¢ [INIT] Page loaded, initializing upload functionality...');
        
        // Get elements
        const logoInput = document.getElementById('id_company_logo');
        const logoBox = document.getElementById('logo-upload-box');
        const excelInput = document.getElementById('id_salary_file');
        const excelBox = document.getElementById('excel-upload-box');
        const generateBtn = document.querySelector('.btn-generate-card');
        const form = document.getElementById('payslip-form');

        // Self-test: Check all elements
        console.log('üìã [TEST] Element Check:');
        console.log('  Logo Input:', logoInput ? '‚úÖ Found' : '‚ùå Not Found', logoInput);
        console.log('  Logo Box:', logoBox ? '‚úÖ Found' : '‚ùå Not Found', logoBox);
        console.log('  Excel Input:', excelInput ? '‚úÖ Found' : '‚ùå Not Found', excelInput);
        console.log('  Excel Box:', excelBox ? '‚úÖ Found' : '‚ùå Not Found', excelBox);
        console.log('  Generate Button:', generateBtn ? '‚úÖ Found' : '‚ùå Not Found', generateBtn);
        console.log('  Form:', form ? '‚úÖ Found' : '‚ùå Not Found', form);

        // ========================================
        // 1. LOGO UPLOAD
        // ========================================
        if (logoBox && logoInput) {
          console.log('üñºÔ∏è  [LOGO] Setting up logo upload...');
          
          // Make clickable
          logoBox.style.cursor = 'pointer';
          logoBox.addEventListener('click', function(e) {
            console.log('üñ±Ô∏è  [LOGO] Upload box clicked');
            e.preventDefault();
            e.stopPropagation();
            logoInput.click();
            console.log('üìÇ [LOGO] File browser opened');
          });

          // Handle file selection
          logoInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
              console.log('‚úÖ [LOGO] File selected:', file.name, '(' + (file.size / 1024).toFixed(2) + ' KB)');
              
              // Update UI
              logoBox.classList.add('has-file');
              const titleEl = logoBox.querySelector('.upload-title');
              const subtitleEl = logoBox.querySelector('.upload-subtitle');
              
              if (titleEl) titleEl.textContent = file.name;
              if (subtitleEl) subtitleEl.innerHTML = '<span style="color: #10b981; font-weight: 600;">‚úì File uploaded successfully</span>';
              
              console.log('üé® [LOGO] UI updated');
            } else {
              console.log('‚ö†Ô∏è  [LOGO] No file selected');
            }
          });

          console.log('‚úÖ [LOGO] Logo upload ready');
        } else {
          console.error('‚ùå [LOGO] Logo upload setup failed - elements not found!');
        }

        // ========================================
        // 2. EXCEL UPLOAD
        // ========================================
        if (excelBox && excelInput) {
          console.log('üìä [EXCEL] Setting up Excel upload...');
          
          // Make clickable
          excelBox.style.cursor = 'pointer';
          excelBox.addEventListener('click', function(e) {
            console.log('üñ±Ô∏è  [EXCEL] Upload box clicked');
            e.preventDefault();
            e.stopPropagation();
            excelInput.click();
            console.log('üìÇ [EXCEL] File browser opened');
          });

          // Handle file selection
          excelInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
              console.log('‚úÖ [EXCEL] File selected:', file.name, '(' + (file.size / 1024).toFixed(2) + ' KB)');
              
              // Update UI
              excelBox.classList.add('has-file');
              const titleEl = excelBox.querySelector('.upload-title');
              const subtitleEl = excelBox.querySelector('.upload-subtitle');
              
              if (titleEl) titleEl.textContent = file.name;
              if (subtitleEl) subtitleEl.innerHTML = '<span style="color: #10b981; font-weight: 600;">‚úì File uploaded successfully</span>';
              
              console.log('üé® [EXCEL] UI updated');
            } else {
              console.log('‚ö†Ô∏è  [EXCEL] No file selected');
            }
          });

          console.log('‚úÖ [EXCEL] Excel upload ready');
        } else {
          console.error('‚ùå [EXCEL] Excel upload setup failed - elements not found!');
        }

        // ========================================
        // 3. GENERATE BUTTON
        // ========================================
        if (generateBtn && form) {
          console.log('‚ö° [GENERATE] Setting up Generate button...');
          
          generateBtn.addEventListener('click', function(e) {
            console.log('üñ±Ô∏è  [GENERATE] Generate button clicked');
            console.log('üìã [GENERATE] Form data:');
            
            const formData = new FormData(form);
            for (let [key, value] of formData.entries()) {
              if (value instanceof File) {
                console.log(`  ${key}: ${value.name} (${(value.size / 1024).toFixed(2)} KB)`);
              } else {
                console.log(`  ${key}: ${value}`);
              }
            }
            
            // Form will submit naturally
            console.log('üì§ [GENERATE] Submitting form...');
          });

          console.log('‚úÖ [GENERATE] Generate button ready');
        } else {
          console.error('‚ùå [GENERATE] Generate button setup failed - elements not found!');
        }

        // ========================================
        // FINAL STATUS
        // ========================================
        console.log('');
        console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
        console.log('üìä SELF-TEST RESULTS:');
        console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
        console.log('1. Logo Upload:', (logoBox && logoInput) ? '‚úÖ WORKING' : '‚ùå NOT WORKING');
        console.log('2. Excel Upload:', (excelBox && excelInput) ? '‚úÖ WORKING' : '‚ùå NOT WORKING');
        console.log('3. Generate Button:', (generateBtn && form) ? '‚úÖ WORKING' : '‚ùå NOT WORKING');
        console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
        console.log('');
        console.log('üí° How to test:');
        console.log('  1. Click "Upload Logo" box ‚Üí File browser should open');
        console.log('  2. Click "Upload Excel File" box ‚Üí File browser should open');
        console.log('  3. Click "Generate Payslips" ‚Üí Form should submit');
        console.log('');
      });
    </script>
  </body>
</html>

